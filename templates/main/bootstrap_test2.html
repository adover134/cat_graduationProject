{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
      #temp_for_location{
        position:absolute;
        font-size:60px;
        top:0;
        left:0;
      }
      
      #all_wrap{
        margin:5%;
        width:90%;
        height:90%;
      }
      .selecting_tools{
        float:left;
        margin:0;
        width:30%;
      }

      #add_room{
        width:100px;
        height:100px;
        background-color:rgb(145, 145, 145);
        color:rgb(224, 224, 224);
        border:8px dashed grey;
        font-size:60px;
        text-align:center;
        margin:5px;
        cursor:pointer;
        float:left;
      }

      #draw_room{
        position:absolute;
        margin-left:30px;
        width:40vw;
        height:40vw;
        display:inline-block;
        background-color:blue;
      }

    

      .room_one_element{
          width:5%;
          height:5%;
          float:left;
          background-color:green;
          color:green;
          border:1px solid black;
          cursor:crosshair;
      }

      .room_structure{
        width:100px;
        height:100px;
        background-color:black;
        color:white;
        font-size:70px;
        text-align:center;
        float:left;
        margin:5px;
      }
      
    </style>
    <link rel="stylesheet" href="{%static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{%static 'css/bootstrap.vertical-tabs.min.css' %}">
</head>
<body>
  
  <div id="temp_for_location">123</div>
  <div id="temp_for_size">what</div>

  <div id="all_wrap" class="container-fluid">
    <div class="panel-group selecting_tools" id="accordion" role="tablist" aria-multiselectable="true">
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="headingOne">
          <h4 class="panel-title text-center">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
              방 추가
            </a>
          </h4>
        </div>
        <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
          <div id="room_add_parent" class="panel-body">
            <div id="add_room">+</div>
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="headingTwo">
          <h4 class="panel-title text-center">
            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
              다른거 메뉴
            </a>
          </h4>
        </div>
        <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading" role="tab" id="headingThree">
          <h4 class="panel-title text-center">
            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              다른거 메뉴
            </a>
          </h4>
        </div>
        <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
          </div>
        </div>
      </div>
      
    </div>
    
    <div id="draw_room">
        <script type="text/javascript">
            for (var i = 0;i<400;i++)
                document.write('<div class="room_one_element"></div>');
        </script>
    </div>
  </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript" src="{%static 'js/bootstrap.js' %}"></script>
<script>
  //방구조 개수 함수
  var structure_number = 1

  //구조 드래그 시작, 끝지점 xy좌표 저장
  var room_sturcture_drag_start_x
  var room_structure_drag_start_y
  var room_sturcture_drag_end_x
  var room_structure_drag_end_y


  var draw_room_box = document.getElementById("draw_room")
  var change_value = document.getElementById("temp_for_location")

  var color = []

  for(var i =0;i<401;i++)
    color[i] = 0
  

  function get_size(){
    var size = document.getElementById("temp_for_size")
    size.innerHTML = "width : " + draw_box_width + ", height : "+ draw_box_height;
  }

  function change_color(event){
    var text = event.target.textContent
    console.log(text)
  }
  

  //마우스 클릭시 x,y좌표 저장
  $(".room_one_element").mousedown(function(){
    var number = $(".room_one_element").index(this);

    //0,0에서 19,19까지
    //밑으로몇칸이 x
    //오른쪽으로 몇칸이 y
    room_structure_drag_start_x = parseInt(number/20)
    room_structure_drag_start_y = number % 20


    change_value.innerHTML = number;

    console.log(room_structure_drag_start_x)
    console.log(room_structure_drag_start_y)
  });


  //마우스 놓으면 시작위치부터 놓은 위치까지 색칠
  $(".room_one_element").mouseup(function(){
    var x1
    var x2
    var y1
    var y2
    var number = $(".room_one_element").index(this);

    room_structure_drag_end_x = parseInt(number/20)
    room_structure_drag_end_y = number % 20

    if(room_structure_drag_start_x <= room_structure_drag_end_x){
      x1 = room_structure_drag_start_x
      x2 = room_structure_drag_end_x
    }else{
      x1 = room_structure_drag_end_x
      x2 = room_structure_drag_start_x
    }

    if(room_structure_drag_start_y <= room_structure_drag_end_y){
      y1 = room_structure_drag_start_y
      y2 = room_structure_drag_end_y
    }else{
      y1 = room_structure_drag_end_y
      y2 = room_structure_drag_start_y
    }

    var change_color_num

    for(var tempx = x1;tempx<=x2;tempx++)
    {
      for(var tempy = y1;tempy<=y2;tempy++)
      {
        change_color_num = tempx * 20 + tempy
        if(color[change_color_num]==0){
          $(".room_one_element").eq(change_color_num).css("background-color","yellow")
          color[number] = 1
        }else{
          $(".room_one_element").eq(change_color_num).css("background-color","green")
          color[number] = 0
        }
      }
    }
    


  });

  //방추가 함수
  $("#add_room").click(function(){
    

    var new_structure = document.createElement("div")
    new_structure.className = "room_structure"
    new_structure.innerHTML = structure_number
    structure_number = structure_number+1

    var parent = document.getElementById("room_add_parent")

    parent.appendChild(new_structure);
    
  });
  
  
</script>
</body>
</html>